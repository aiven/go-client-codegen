// Code generated by Aiven. DO NOT EDIT.

package organization

import (
	"context"
	"encoding/json"
	"fmt"
	"time"
)

type Handler interface {
	// OrganizationAuthenticationConfigGet retrieve authentication configuration
	// GET /v1/organization/{organization_id}/config/authentication
	// https://api.aiven.io/doc/#tag/Organizations/operation/OrganizationAuthenticationConfigGet
	OrganizationAuthenticationConfigGet(ctx context.Context, organizationId string) (*OrganizationAuthenticationConfigGetOut, error)

	// OrganizationAuthenticationConfigUpdate update authentication configuration
	// PATCH /v1/organization/{organization_id}/config/authentication
	// https://api.aiven.io/doc/#tag/Organizations/operation/OrganizationAuthenticationConfigUpdate
	OrganizationAuthenticationConfigUpdate(ctx context.Context, organizationId string, in *OrganizationAuthenticationConfigUpdateIn) (*OrganizationAuthenticationConfigUpdateOut, error)

	// OrganizationGet get information about an organization
	// GET /v1/organization/{organization_id}
	// https://api.aiven.io/doc/#tag/Organizations/operation/OrganizationGet
	OrganizationGet(ctx context.Context, organizationId string) (*OrganizationGetOut, error)

	// OrganizationUpdate update organization's details
	// PATCH /v1/organization/{organization_id}
	// https://api.aiven.io/doc/#tag/Organizations/operation/OrganizationUpdate
	OrganizationUpdate(ctx context.Context, organizationId string, in *OrganizationUpdateIn) (*OrganizationUpdateOut, error)

	// UserOrganizationCreate create an organization
	// POST /v1/organizations
	// https://api.aiven.io/doc/#tag/Organizations/operation/UserOrganizationCreate
	UserOrganizationCreate(ctx context.Context, in *UserOrganizationCreateIn) (*UserOrganizationCreateOut, error)

	// UserOrganizationsList list organizations the user belongs to
	// GET /v1/organizations
	// https://api.aiven.io/doc/#tag/Organizations/operation/UserOrganizationsList
	UserOrganizationsList(ctx context.Context) ([]OrganizationOut, error)
}

func NewHandler(doer doer) OrganizationHandler {
	return OrganizationHandler{doer}
}

type doer interface {
	Do(ctx context.Context, operationID, method, path string, v any) ([]byte, error)
}

type OrganizationHandler struct {
	doer doer
}

func (h *OrganizationHandler) OrganizationAuthenticationConfigGet(ctx context.Context, organizationId string) (*OrganizationAuthenticationConfigGetOut, error) {
	path := fmt.Sprintf("/v1/organization/%s/config/authentication", organizationId)
	b, err := h.doer.Do(ctx, "OrganizationAuthenticationConfigGet", "GET", path, nil)
	if err != nil {
		return nil, err
	}
	out := new(OrganizationAuthenticationConfigGetOut)
	err = json.Unmarshal(b, out)
	if err != nil {
		return nil, err
	}
	return out, nil
}
func (h *OrganizationHandler) OrganizationAuthenticationConfigUpdate(ctx context.Context, organizationId string, in *OrganizationAuthenticationConfigUpdateIn) (*OrganizationAuthenticationConfigUpdateOut, error) {
	path := fmt.Sprintf("/v1/organization/%s/config/authentication", organizationId)
	b, err := h.doer.Do(ctx, "OrganizationAuthenticationConfigUpdate", "PATCH", path, in)
	if err != nil {
		return nil, err
	}
	out := new(OrganizationAuthenticationConfigUpdateOut)
	err = json.Unmarshal(b, out)
	if err != nil {
		return nil, err
	}
	return out, nil
}
func (h *OrganizationHandler) OrganizationGet(ctx context.Context, organizationId string) (*OrganizationGetOut, error) {
	path := fmt.Sprintf("/v1/organization/%s", organizationId)
	b, err := h.doer.Do(ctx, "OrganizationGet", "GET", path, nil)
	if err != nil {
		return nil, err
	}
	out := new(OrganizationGetOut)
	err = json.Unmarshal(b, out)
	if err != nil {
		return nil, err
	}
	return out, nil
}
func (h *OrganizationHandler) OrganizationUpdate(ctx context.Context, organizationId string, in *OrganizationUpdateIn) (*OrganizationUpdateOut, error) {
	path := fmt.Sprintf("/v1/organization/%s", organizationId)
	b, err := h.doer.Do(ctx, "OrganizationUpdate", "PATCH", path, in)
	if err != nil {
		return nil, err
	}
	out := new(OrganizationUpdateOut)
	err = json.Unmarshal(b, out)
	if err != nil {
		return nil, err
	}
	return out, nil
}
func (h *OrganizationHandler) UserOrganizationCreate(ctx context.Context, in *UserOrganizationCreateIn) (*UserOrganizationCreateOut, error) {
	path := fmt.Sprintf("/v1/organizations")
	b, err := h.doer.Do(ctx, "UserOrganizationCreate", "POST", path, in)
	if err != nil {
		return nil, err
	}
	out := new(UserOrganizationCreateOut)
	err = json.Unmarshal(b, out)
	if err != nil {
		return nil, err
	}
	return out, nil
}
func (h *OrganizationHandler) UserOrganizationsList(ctx context.Context) ([]OrganizationOut, error) {
	path := fmt.Sprintf("/v1/organizations")
	b, err := h.doer.Do(ctx, "UserOrganizationsList", "GET", path, nil)
	if err != nil {
		return nil, err
	}
	out := new(userOrganizationsListOut)
	err = json.Unmarshal(b, out)
	if err != nil {
		return nil, err
	}
	return out.Organizations, nil
}

type OrganizationAuthenticationConfigGetOut struct {
	OauthEnabled                           *bool `json:"oauth_enabled,omitempty"`
	PasswordAuthEnabled                    *bool `json:"password_auth_enabled,omitempty"`
	PersonalTokensEnabled                  *bool `json:"personal_tokens_enabled,omitempty"`
	PersonalTokensRequireAllowedAuthMethod *bool `json:"personal_tokens_require_allowed_auth_method,omitempty"`
	SamlAllowExternal                      *bool `json:"saml_allow_external,omitempty"`
	SamlEnabled                            *bool `json:"saml_enabled,omitempty"`
	TwoFactorRequired                      *bool `json:"two_factor_required,omitempty"`
}
type OrganizationAuthenticationConfigUpdateIn struct {
	OauthEnabled                           *bool `json:"oauth_enabled,omitempty"`
	PasswordAuthEnabled                    *bool `json:"password_auth_enabled,omitempty"`
	PersonalTokensEnabled                  *bool `json:"personal_tokens_enabled,omitempty"`
	PersonalTokensRequireAllowedAuthMethod *bool `json:"personal_tokens_require_allowed_auth_method,omitempty"`
	SamlAllowExternal                      *bool `json:"saml_allow_external,omitempty"`
	SamlEnabled                            *bool `json:"saml_enabled,omitempty"`
	TwoFactorRequired                      *bool `json:"two_factor_required,omitempty"`
}
type OrganizationAuthenticationConfigUpdateOut struct {
	OauthEnabled                           *bool `json:"oauth_enabled,omitempty"`
	PasswordAuthEnabled                    *bool `json:"password_auth_enabled,omitempty"`
	PersonalTokensEnabled                  *bool `json:"personal_tokens_enabled,omitempty"`
	PersonalTokensRequireAllowedAuthMethod *bool `json:"personal_tokens_require_allowed_auth_method,omitempty"`
	SamlAllowExternal                      *bool `json:"saml_allow_external,omitempty"`
	SamlEnabled                            *bool `json:"saml_enabled,omitempty"`
	TwoFactorRequired                      *bool `json:"two_factor_required,omitempty"`
}
type OrganizationGetOut struct {
	AccountId                    string    `json:"account_id"`
	CreateTime                   time.Time `json:"create_time"`
	DefaultGovernanceUserGroupId string    `json:"default_governance_user_group_id,omitempty"`
	OrganizationId               string    `json:"organization_id"`
	OrganizationName             string    `json:"organization_name"`
	Tier                         TierType  `json:"tier"`
	UpdateTime                   time.Time `json:"update_time"`
}
type OrganizationOut struct {
	AccountId                    string    `json:"account_id"`
	CreateTime                   time.Time `json:"create_time"`
	DefaultGovernanceUserGroupId string    `json:"default_governance_user_group_id,omitempty"`
	OrganizationId               string    `json:"organization_id"`
	OrganizationName             string    `json:"organization_name"`
	Tier                         TierType  `json:"tier"`
	UpdateTime                   time.Time `json:"update_time"`
}
type OrganizationUpdateIn struct {
	DefaultGovernanceUserGroupId string   `json:"default_governance_user_group_id,omitempty"`
	KafkaGovernanceEnabled       *bool    `json:"kafka_governance_enabled,omitempty"`
	Name                         string   `json:"name,omitempty"`
	Tier                         TierType `json:"tier,omitempty"`
}
type OrganizationUpdateOut struct {
	AccountId                    string    `json:"account_id"`
	CreateTime                   time.Time `json:"create_time"`
	DefaultGovernanceUserGroupId string    `json:"default_governance_user_group_id,omitempty"`
	OrganizationId               string    `json:"organization_id"`
	OrganizationName             string    `json:"organization_name"`
	Tier                         TierType  `json:"tier"`
	UpdateTime                   time.Time `json:"update_time"`
}
type TierType string

const (
	TierTypeBusiness TierType = "business"
	TierTypePersonal TierType = "personal"
)

func TierTypeChoices() []string {
	return []string{"business", "personal"}
}

type UserOrganizationCreateIn struct {
	OrganizationName      string   `json:"organization_name"`
	PrimaryBillingGroupId string   `json:"primary_billing_group_id,omitempty"`
	Tier                  TierType `json:"tier"`
}
type UserOrganizationCreateOut struct {
	AccountId                    string    `json:"account_id"`
	CreateTime                   time.Time `json:"create_time"`
	DefaultGovernanceUserGroupId string    `json:"default_governance_user_group_id,omitempty"`
	OrganizationId               string    `json:"organization_id"`
	OrganizationName             string    `json:"organization_name"`
	Tier                         TierType  `json:"tier"`
	UpdateTime                   time.Time `json:"update_time"`
}
type userOrganizationsListOut struct {
	Organizations []OrganizationOut `json:"organizations"`
}
