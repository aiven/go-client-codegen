// Code generated by Aiven. DO NOT EDIT.

package organizationprojects

import (
	"context"
	"encoding/json"
	"fmt"
	"net/url"
)

type Handler interface {
	// OrganizationProjectsCreate [EXPERIMENTAL] Create project under the organization
	// POST /v1/organization/{organization_id}/projects
	// https://api.aiven.io/doc/#tag/Organizations/operation/OrganizationProjectsCreate
	OrganizationProjectsCreate(ctx context.Context, organizationId string, in *OrganizationProjectsCreateIn) (*OrganizationProjectsCreateOut, error)
}

// doer http client
type doer interface {
	Do(ctx context.Context, operationID, method, path string, in any, query ...[2]string) ([]byte, error)
}

func NewHandler(doer doer) OrganizationProjectsHandler {
	return OrganizationProjectsHandler{doer}
}

type OrganizationProjectsHandler struct {
	doer doer
}

func (h *OrganizationProjectsHandler) OrganizationProjectsCreate(ctx context.Context, organizationId string, in *OrganizationProjectsCreateIn) (*OrganizationProjectsCreateOut, error) {
	path := fmt.Sprintf("/v1/organization/%s/projects", url.PathEscape(organizationId))
	b, err := h.doer.Do(ctx, "OrganizationProjectsCreate", "POST", path, in)
	if err != nil {
		return nil, err
	}
	out := new(OrganizationProjectsCreateOut)
	err = json.Unmarshal(b, out)
	if err != nil {
		return nil, err
	}
	return out, nil
}

// EndOfLifeExtension ServiceEndOfLifeExtension
type EndOfLifeExtension struct {
	EolDate string `json:"eol_date"` // Extended EOL date
	Version string `json:"version"`  // Service version
}

// OrganizationProjectsCreateIn OrganizationProjectsCreateRequestBody
type OrganizationProjectsCreateIn struct {
	BillingGroupId string            `json:"billing_group_id"`    // Billing group ID to assign to the project.
	ParentId       *string           `json:"parent_id,omitempty"` // Organization or unit ID to where to move the project
	ProjectId      string            `json:"project_id"`          // Project ID
	Tags           map[string]string `json:"tags"`                // Tags
}

// OrganizationProjectsCreateOut OrganizationProjectsCreateResponse
type OrganizationProjectsCreateOut struct {
	AccountId          *string                       `json:"account_id,omitempty"`       // Account ID to where the project belongs
	BillingGroupId     *string                       `json:"billing_group_id,omitempty"` // Billing group ID
	EndOfLifeExtension map[string]EndOfLifeExtension `json:"end_of_life_extension"`      // End of life extension information
	Features           map[string]bool               `json:"features,omitempty"`         // Feature flags
	ParentId           *string                       `json:"parent_id,omitempty"`        // Organization or unit ID to where the project belongs
	ProjectId          string                        `json:"project_id"`                 // Project ID
	Tags               map[string]string             `json:"tags"`                       // Tags
	TechEmails         []TechEmailOut                `json:"tech_emails"`                // List of project technical email addresses
}
type TechEmailOut struct {
	Email string `json:"email"` // Technical contact email
}
