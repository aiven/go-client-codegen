// Code generated by Aiven. DO NOT EDIT.

package organizationprojects

import (
	"context"
	"encoding/json"
	"fmt"
	"net/url"
)

type Handler interface {
	// OrganizationProjectsCreate create project under the organization
	// POST /v1/organization/{organization_id}/projects
	// https://api.aiven.io/doc/#tag/Organizations/operation/OrganizationProjectsCreate
	OrganizationProjectsCreate(ctx context.Context, organizationId string, in *OrganizationProjectsCreateIn) (*OrganizationProjectsCreateOut, error)

	// OrganizationProjectsDelete delete project under the organization
	// DELETE /v1/organization/{organization_id}/projects/{project_id}
	// https://api.aiven.io/doc/#tag/Organizations/operation/OrganizationProjectsDelete
	// Required roles or permissions: organization:projects:write
	OrganizationProjectsDelete(ctx context.Context, organizationId string, projectId string) error

	// OrganizationProjectsGet retrieve project under the organization
	// GET /v1/organization/{organization_id}/projects/{project_id}
	// https://api.aiven.io/doc/#tag/Organizations/operation/OrganizationProjectsGet
	// Required roles or permissions: project:services:read
	OrganizationProjectsGet(ctx context.Context, organizationId string, projectId string) (*OrganizationProjectsGetOut, error)

	// OrganizationProjectsList list projects under the organization
	// GET /v1/organization/{organization_id}/projects
	// https://api.aiven.io/doc/#tag/Organizations/operation/OrganizationProjectsList
	OrganizationProjectsList(ctx context.Context, organizationId string) (*OrganizationProjectsListOut, error)

	// OrganizationProjectsUpdate update project under the organization
	// PATCH /v1/organization/{organization_id}/projects/{project_id}
	// https://api.aiven.io/doc/#tag/Organizations/operation/OrganizationProjectsUpdate
	// Required roles or permissions: organization:projects:write
	OrganizationProjectsUpdate(ctx context.Context, organizationId string, projectId string, in *OrganizationProjectsUpdateIn) (*OrganizationProjectsUpdateOut, error)
}

// doer http client
type doer interface {
	Do(ctx context.Context, operationID, method, path string, in any, query ...[2]string) ([]byte, error)
}

func NewHandler(doer doer) OrganizationProjectsHandler {
	return OrganizationProjectsHandler{doer}
}

type OrganizationProjectsHandler struct {
	doer doer
}

func (h *OrganizationProjectsHandler) OrganizationProjectsCreate(ctx context.Context, organizationId string, in *OrganizationProjectsCreateIn) (*OrganizationProjectsCreateOut, error) {
	path := fmt.Sprintf("/v1/organization/%s/projects", url.PathEscape(organizationId))
	b, err := h.doer.Do(ctx, "OrganizationProjectsCreate", "POST", path, in)
	if err != nil {
		return nil, err
	}
	out := new(OrganizationProjectsCreateOut)
	err = json.Unmarshal(b, out)
	if err != nil {
		return nil, err
	}
	return out, nil
}
func (h *OrganizationProjectsHandler) OrganizationProjectsDelete(ctx context.Context, organizationId string, projectId string) error {
	path := fmt.Sprintf("/v1/organization/%s/projects/%s", url.PathEscape(organizationId), url.PathEscape(projectId))
	_, err := h.doer.Do(ctx, "OrganizationProjectsDelete", "DELETE", path, nil)
	return err
}
func (h *OrganizationProjectsHandler) OrganizationProjectsGet(ctx context.Context, organizationId string, projectId string) (*OrganizationProjectsGetOut, error) {
	path := fmt.Sprintf("/v1/organization/%s/projects/%s", url.PathEscape(organizationId), url.PathEscape(projectId))
	b, err := h.doer.Do(ctx, "OrganizationProjectsGet", "GET", path, nil)
	if err != nil {
		return nil, err
	}
	out := new(OrganizationProjectsGetOut)
	err = json.Unmarshal(b, out)
	if err != nil {
		return nil, err
	}
	return out, nil
}
func (h *OrganizationProjectsHandler) OrganizationProjectsList(ctx context.Context, organizationId string) (*OrganizationProjectsListOut, error) {
	path := fmt.Sprintf("/v1/organization/%s/projects", url.PathEscape(organizationId))
	b, err := h.doer.Do(ctx, "OrganizationProjectsList", "GET", path, nil)
	if err != nil {
		return nil, err
	}
	out := new(OrganizationProjectsListOut)
	err = json.Unmarshal(b, out)
	if err != nil {
		return nil, err
	}
	return out, nil
}
func (h *OrganizationProjectsHandler) OrganizationProjectsUpdate(ctx context.Context, organizationId string, projectId string, in *OrganizationProjectsUpdateIn) (*OrganizationProjectsUpdateOut, error) {
	path := fmt.Sprintf("/v1/organization/%s/projects/%s", url.PathEscape(organizationId), url.PathEscape(projectId))
	b, err := h.doer.Do(ctx, "OrganizationProjectsUpdate", "PATCH", path, in)
	if err != nil {
		return nil, err
	}
	out := new(OrganizationProjectsUpdateOut)
	err = json.Unmarshal(b, out)
	if err != nil {
		return nil, err
	}
	return out, nil
}

// EndOfLifeExtension ServiceEndOfLifeExtension
type EndOfLifeExtension struct {
	EolDate string `json:"eol_date"` // Extended EOL date
	Version string `json:"version"`  // Service version
}

// OrganizationProjectsCreateIn OrganizationProjectsCreateRequestBody
type OrganizationProjectsCreateIn struct {
	BasePort       *int              `json:"base_port,omitempty"`   // Valid port number (10000-30000)
	BillingGroupId string            `json:"billing_group_id"`      // Billing group ID to assign to the project.
	ParentId       *string           `json:"parent_id,omitempty"`   // Organization or unit ID to where to move the project
	ProjectId      string            `json:"project_id"`            // Project ID
	Tags           map[string]string `json:"tags"`                  // Tags
	TechEmails     *[]TechEmailIn    `json:"tech_emails,omitempty"` // Technical contact emails
}

// OrganizationProjectsCreateOut OrganizationProjectsCreateResponse
type OrganizationProjectsCreateOut struct {
	AccountId          *string                       `json:"account_id,omitempty"`       // Deprecated: Account ID to where the project belongs
	BasePort           *int                          `json:"base_port,omitempty"`        // Valid port number (1-65535)
	BillingGroupId     *string                       `json:"billing_group_id,omitempty"` // Billing group ID
	EndOfLifeExtension map[string]EndOfLifeExtension `json:"end_of_life_extension"`      // End of life extension information
	Features           map[string]bool               `json:"features,omitempty"`         // Feature flags
	OrganizationId     string                        `json:"organization_id"`            // Organization ID
	ParentId           *string                       `json:"parent_id,omitempty"`        // Organization or unit ID to where the project belongs
	ProjectId          string                        `json:"project_id"`                 // Project ID
	Tags               map[string]string             `json:"tags"`                       // Tags
	TechEmails         []TechEmailOut                `json:"tech_emails"`                // List of project technical email addresses
}

// OrganizationProjectsGetOut OrganizationProjectsGetResponse
type OrganizationProjectsGetOut struct {
	AccountId          *string                       `json:"account_id,omitempty"`       // Deprecated: Account ID to where the project belongs
	BasePort           *int                          `json:"base_port,omitempty"`        // Valid port number (1-65535)
	BillingGroupId     *string                       `json:"billing_group_id,omitempty"` // Billing group ID
	EndOfLifeExtension map[string]EndOfLifeExtension `json:"end_of_life_extension"`      // End of life extension information
	Features           map[string]bool               `json:"features,omitempty"`         // Feature flags
	OrganizationId     string                        `json:"organization_id"`            // Organization ID
	ParentId           *string                       `json:"parent_id,omitempty"`        // Organization or unit ID to where the project belongs
	ProjectId          string                        `json:"project_id"`                 // Project ID
	Tags               map[string]string             `json:"tags"`                       // Tags
	TechEmails         []TechEmailOut                `json:"tech_emails"`                // List of project technical email addresses
}

// OrganizationProjectsListOut OrganizationProjectsListResponse
type OrganizationProjectsListOut struct {
	Projects          []ProjectOut `json:"projects"`            // List of projects
	TotalProjectCount int          `json:"total_project_count"` // Total number of projects
}

// OrganizationProjectsUpdateIn OrganizationProjectsUpdateRequestBody
type OrganizationProjectsUpdateIn struct {
	BasePort       *int               `json:"base_port,omitempty"`        // Valid port number (10000-30000)
	BillingGroupId *string            `json:"billing_group_id,omitempty"` // Billing group ID to assign to the project. It's required when moving projects between organizations
	OrganizationId *string            `json:"organization_id,omitempty"`  // Organization ID
	ParentId       *string            `json:"parent_id,omitempty"`        // Organization or unit ID to where to move the project
	ProjectName    *string            `json:"project_name,omitempty"`     // Project name
	Tags           *map[string]string `json:"tags,omitempty"`             // Tags
	TechEmails     *[]TechEmailIn     `json:"tech_emails,omitempty"`      // Technical contact emails
}

// OrganizationProjectsUpdateOut OrganizationProjectsUpdateResponse
type OrganizationProjectsUpdateOut struct {
	AccountId          *string                       `json:"account_id,omitempty"`       // Deprecated: Account ID to where the project belongs
	BasePort           *int                          `json:"base_port,omitempty"`        // Valid port number (1-65535)
	BillingGroupId     *string                       `json:"billing_group_id,omitempty"` // Billing group ID
	EndOfLifeExtension map[string]EndOfLifeExtension `json:"end_of_life_extension"`      // End of life extension information
	Features           map[string]bool               `json:"features,omitempty"`         // Feature flags
	OrganizationId     string                        `json:"organization_id"`            // Organization ID
	ParentId           *string                       `json:"parent_id,omitempty"`        // Organization or unit ID to where the project belongs
	ProjectId          string                        `json:"project_id"`                 // Project ID
	Tags               map[string]string             `json:"tags"`                       // Tags
	TechEmails         []TechEmailOut                `json:"tech_emails"`                // List of project technical email addresses
}
type ProjectOut struct {
	AccountId          *string                       `json:"account_id,omitempty"`       // Deprecated: Account ID to where the project belongs
	BasePort           *int                          `json:"base_port,omitempty"`        // Valid port number (1-65535)
	BillingGroupId     *string                       `json:"billing_group_id,omitempty"` // Billing group ID
	EndOfLifeExtension map[string]EndOfLifeExtension `json:"end_of_life_extension"`      // End of life extension information
	ParentId           *string                       `json:"parent_id,omitempty"`        // Organization or unit ID to where the project belongs
	ProjectId          string                        `json:"project_id"`                 // Project ID
	Tags               map[string]string             `json:"tags"`                       // Tags
	TechEmails         []TechEmailOut                `json:"tech_emails"`                // List of project technical email addresses
}
type TechEmailIn struct {
	Email string `json:"email"` // Technical contact email
}
type TechEmailOut struct {
	Email string `json:"email"` // Technical contact email
}
