// Code generated by Aiven. DO NOT EDIT.

package staticip

import (
	"context"
	"encoding/json"
	"fmt"
	"net/url"
)

type Handler interface {
	// ProjectStaticIPAssociate associate a static IP address with a service
	// POST /v1/project/{project}/static-ips/{static_ip_address_id}/association
	// https://api.aiven.io/doc/#tag/StaticIP/operation/ProjectStaticIPAssociate
	// Required roles or permissions: service:configuration:write
	ProjectStaticIPAssociate(ctx context.Context, project string, staticIpAddressId string, in *ProjectStaticIpAssociateIn) (*ProjectStaticIpAssociateOut, error)

	// ProjectStaticIPAvailabilityList list static IP address cloud availability and prices for a project
	// GET /v1/project/{project}/static-ip-availability
	// https://api.aiven.io/doc/#tag/StaticIP/operation/ProjectStaticIPAvailabilityList
	// Required roles or permissions: developer, operator, read_only
	ProjectStaticIPAvailabilityList(ctx context.Context, project string) ([]StaticIpAddressAvailabilityOut, error)

	// ProjectStaticIPDissociate dissociate a static IP address from a service
	// DELETE /v1/project/{project}/static-ips/{static_ip_address_id}/association
	// https://api.aiven.io/doc/#tag/StaticIP/operation/ProjectStaticIPDissociate
	// Required roles or permissions: service:configuration:write
	ProjectStaticIPDissociate(ctx context.Context, project string, staticIpAddressId string) (*ProjectStaticIpDissociateOut, error)

	// ProjectStaticIPPatch update a static IP address configuration
	// PATCH /v1/project/{project}/static-ips/{static_ip_address_id}
	// https://api.aiven.io/doc/#tag/StaticIP/operation/ProjectStaticIPPatch
	// Required roles or permissions: operator
	ProjectStaticIPPatch(ctx context.Context, project string, staticIpAddressId string, in *ProjectStaticIpPatchIn) (*ProjectStaticIpPatchOut, error)

	// PublicStaticIPAvailabilityList list static IP clouds and prices
	// GET /v1/tenants/{tenant}/static-ip-availability
	// https://api.aiven.io/doc/#tag/Cloud_platforms/operation/PublicStaticIPAvailabilityList
	PublicStaticIPAvailabilityList(ctx context.Context, tenant string) ([]StaticIpAddressAvailabilityOut, error)

	// StaticIPCreate create static IP address
	// POST /v1/project/{project}/static-ips
	// https://api.aiven.io/doc/#tag/StaticIP/operation/StaticIPCreate
	// Required roles or permissions: operator
	StaticIPCreate(ctx context.Context, project string, in *StaticIpCreateIn) (*StaticIpCreateOut, error)

	// StaticIPList list static IP addresses
	// GET /v1/project/{project}/static-ips
	// https://api.aiven.io/doc/#tag/StaticIP/operation/StaticIPList
	// Required roles or permissions: developer, operator, read_only
	StaticIPList(ctx context.Context, project string) ([]StaticIpOut, error)
}

// doer http client
type doer interface {
	Do(ctx context.Context, operationID, method, path string, in any, query ...[2]string) ([]byte, error)
}

func NewHandler(doer doer) StaticIPHandler {
	return StaticIPHandler{doer}
}

type StaticIPHandler struct {
	doer doer
}

func (h *StaticIPHandler) ProjectStaticIPAssociate(ctx context.Context, project string, staticIpAddressId string, in *ProjectStaticIpAssociateIn) (*ProjectStaticIpAssociateOut, error) {
	path := fmt.Sprintf("/v1/project/%s/static-ips/%s/association", url.PathEscape(project), url.PathEscape(staticIpAddressId))
	b, err := h.doer.Do(ctx, "ProjectStaticIPAssociate", "POST", path, in)
	if err != nil {
		return nil, err
	}
	out := new(ProjectStaticIpAssociateOut)
	err = json.Unmarshal(b, out)
	if err != nil {
		return nil, err
	}
	return out, nil
}
func (h *StaticIPHandler) ProjectStaticIPAvailabilityList(ctx context.Context, project string) ([]StaticIpAddressAvailabilityOut, error) {
	path := fmt.Sprintf("/v1/project/%s/static-ip-availability", url.PathEscape(project))
	b, err := h.doer.Do(ctx, "ProjectStaticIPAvailabilityList", "GET", path, nil)
	if err != nil {
		return nil, err
	}
	out := new(projectStaticIpAvailabilityListOut)
	err = json.Unmarshal(b, out)
	if err != nil {
		return nil, err
	}
	return out.StaticIpAddressAvailability, nil
}
func (h *StaticIPHandler) ProjectStaticIPDissociate(ctx context.Context, project string, staticIpAddressId string) (*ProjectStaticIpDissociateOut, error) {
	path := fmt.Sprintf("/v1/project/%s/static-ips/%s/association", url.PathEscape(project), url.PathEscape(staticIpAddressId))
	b, err := h.doer.Do(ctx, "ProjectStaticIPDissociate", "DELETE", path, nil)
	if err != nil {
		return nil, err
	}
	out := new(ProjectStaticIpDissociateOut)
	err = json.Unmarshal(b, out)
	if err != nil {
		return nil, err
	}
	return out, nil
}
func (h *StaticIPHandler) ProjectStaticIPPatch(ctx context.Context, project string, staticIpAddressId string, in *ProjectStaticIpPatchIn) (*ProjectStaticIpPatchOut, error) {
	path := fmt.Sprintf("/v1/project/%s/static-ips/%s", url.PathEscape(project), url.PathEscape(staticIpAddressId))
	b, err := h.doer.Do(ctx, "ProjectStaticIPPatch", "PATCH", path, in)
	if err != nil {
		return nil, err
	}
	out := new(ProjectStaticIpPatchOut)
	err = json.Unmarshal(b, out)
	if err != nil {
		return nil, err
	}
	return out, nil
}
func (h *StaticIPHandler) PublicStaticIPAvailabilityList(ctx context.Context, tenant string) ([]StaticIpAddressAvailabilityOut, error) {
	path := fmt.Sprintf("/v1/tenants/%s/static-ip-availability", url.PathEscape(tenant))
	b, err := h.doer.Do(ctx, "PublicStaticIPAvailabilityList", "GET", path, nil)
	if err != nil {
		return nil, err
	}
	out := new(publicStaticIpAvailabilityListOut)
	err = json.Unmarshal(b, out)
	if err != nil {
		return nil, err
	}
	return out.StaticIpAddressAvailability, nil
}
func (h *StaticIPHandler) StaticIPCreate(ctx context.Context, project string, in *StaticIpCreateIn) (*StaticIpCreateOut, error) {
	path := fmt.Sprintf("/v1/project/%s/static-ips", url.PathEscape(project))
	b, err := h.doer.Do(ctx, "StaticIPCreate", "POST", path, in)
	if err != nil {
		return nil, err
	}
	out := new(StaticIpCreateOut)
	err = json.Unmarshal(b, out)
	if err != nil {
		return nil, err
	}
	return out, nil
}
func (h *StaticIPHandler) StaticIPList(ctx context.Context, project string) ([]StaticIpOut, error) {
	path := fmt.Sprintf("/v1/project/%s/static-ips", url.PathEscape(project))
	b, err := h.doer.Do(ctx, "StaticIPList", "GET", path, nil)
	if err != nil {
		return nil, err
	}
	out := new(staticIpListOut)
	err = json.Unmarshal(b, out)
	if err != nil {
		return nil, err
	}
	return out.StaticIps, nil
}

// ProjectStaticIpAssociateIn ProjectStaticIPAssociateRequestBody
type ProjectStaticIpAssociateIn struct {
	ServiceName string `json:"service_name"` // Service name
}

// ProjectStaticIpAssociateOut ProjectStaticIPAssociateResponse
type ProjectStaticIpAssociateOut struct {
	CloudName             string                            `json:"cloud_name"`             // Target cloud
	IpAddress             string                            `json:"ip_address"`             // IPv4 address
	ServiceName           string                            `json:"service_name"`           // Service name
	State                 ProjectStaticIpAssociateStateType `json:"state"`                  // Static IP address state
	StaticIpAddressId     string                            `json:"static_ip_address_id"`   // Static IP address identifier
	TerminationProtection bool                              `json:"termination_protection"` // Static IP address is protected against deletion
}
type ProjectStaticIpAssociateStateType string

const (
	ProjectStaticIpAssociateStateTypeAssigned  ProjectStaticIpAssociateStateType = "assigned"
	ProjectStaticIpAssociateStateTypeAvailable ProjectStaticIpAssociateStateType = "available"
	ProjectStaticIpAssociateStateTypeCreated   ProjectStaticIpAssociateStateType = "created"
	ProjectStaticIpAssociateStateTypeCreating  ProjectStaticIpAssociateStateType = "creating"
	ProjectStaticIpAssociateStateTypeDeleted   ProjectStaticIpAssociateStateType = "deleted"
	ProjectStaticIpAssociateStateTypeDeleting  ProjectStaticIpAssociateStateType = "deleting"
)

func ProjectStaticIpAssociateStateTypeChoices() []string {
	return []string{"assigned", "available", "created", "creating", "deleted", "deleting"}
}

// ProjectStaticIpDissociateOut ProjectStaticIPDissociateResponse
type ProjectStaticIpDissociateOut struct {
	CloudName             string                             `json:"cloud_name"`             // Target cloud
	IpAddress             string                             `json:"ip_address"`             // IPv4 address
	ServiceName           string                             `json:"service_name"`           // Service name
	State                 ProjectStaticIpDissociateStateType `json:"state"`                  // Static IP address state
	StaticIpAddressId     string                             `json:"static_ip_address_id"`   // Static IP address identifier
	TerminationProtection bool                               `json:"termination_protection"` // Static IP address is protected against deletion
}
type ProjectStaticIpDissociateStateType string

const (
	ProjectStaticIpDissociateStateTypeAssigned  ProjectStaticIpDissociateStateType = "assigned"
	ProjectStaticIpDissociateStateTypeAvailable ProjectStaticIpDissociateStateType = "available"
	ProjectStaticIpDissociateStateTypeCreated   ProjectStaticIpDissociateStateType = "created"
	ProjectStaticIpDissociateStateTypeCreating  ProjectStaticIpDissociateStateType = "creating"
	ProjectStaticIpDissociateStateTypeDeleted   ProjectStaticIpDissociateStateType = "deleted"
	ProjectStaticIpDissociateStateTypeDeleting  ProjectStaticIpDissociateStateType = "deleting"
)

func ProjectStaticIpDissociateStateTypeChoices() []string {
	return []string{"assigned", "available", "created", "creating", "deleted", "deleting"}
}

// ProjectStaticIpPatchIn ProjectStaticIPPatchRequestBody
type ProjectStaticIpPatchIn struct {
	TerminationProtection *bool `json:"termination_protection,omitempty"` // Static IP address is protected against deletion
}

// ProjectStaticIpPatchOut ProjectStaticIPPatchResponse
type ProjectStaticIpPatchOut struct {
	CloudName             string                        `json:"cloud_name"`             // Target cloud
	IpAddress             string                        `json:"ip_address"`             // IPv4 address
	ServiceName           string                        `json:"service_name"`           // Service name
	State                 ProjectStaticIpPatchStateType `json:"state"`                  // Static IP address state
	StaticIpAddressId     string                        `json:"static_ip_address_id"`   // Static IP address identifier
	TerminationProtection bool                          `json:"termination_protection"` // Static IP address is protected against deletion
}
type ProjectStaticIpPatchStateType string

const (
	ProjectStaticIpPatchStateTypeAssigned  ProjectStaticIpPatchStateType = "assigned"
	ProjectStaticIpPatchStateTypeAvailable ProjectStaticIpPatchStateType = "available"
	ProjectStaticIpPatchStateTypeCreated   ProjectStaticIpPatchStateType = "created"
	ProjectStaticIpPatchStateTypeCreating  ProjectStaticIpPatchStateType = "creating"
	ProjectStaticIpPatchStateTypeDeleted   ProjectStaticIpPatchStateType = "deleted"
	ProjectStaticIpPatchStateTypeDeleting  ProjectStaticIpPatchStateType = "deleting"
)

func ProjectStaticIpPatchStateTypeChoices() []string {
	return []string{"assigned", "available", "created", "creating", "deleted", "deleting"}
}

type StaticIpAddressAvailabilityOut struct {
	CloudName string `json:"cloud_name"` // Target cloud
	PriceUsd  string `json:"price_usd"`  // Hourly static IP address price in this cloud region
}

// StaticIpCreateIn StaticIPCreateRequestBody
type StaticIpCreateIn struct {
	CloudName             string `json:"cloud_name"`                       // Target cloud
	TerminationProtection *bool  `json:"termination_protection,omitempty"` // Static IP address is protected against deletion
}

// StaticIpCreateOut StaticIPCreateResponse
type StaticIpCreateOut struct {
	CloudName             string            `json:"cloud_name"`             // Target cloud
	IpAddress             string            `json:"ip_address"`             // IPv4 address
	ServiceName           string            `json:"service_name"`           // Service name
	State                 StaticIpStateType `json:"state"`                  // Static IP address state
	StaticIpAddressId     string            `json:"static_ip_address_id"`   // Static IP address identifier
	TerminationProtection bool              `json:"termination_protection"` // Static IP address is protected against deletion
}
type StaticIpOut struct {
	CloudName             string            `json:"cloud_name"`             // Target cloud
	IpAddress             string            `json:"ip_address"`             // IPv4 address
	ServiceName           string            `json:"service_name"`           // Service name
	State                 StaticIpStateType `json:"state"`                  // Static IP address state
	StaticIpAddressId     string            `json:"static_ip_address_id"`   // Static IP address identifier
	TerminationProtection bool              `json:"termination_protection"` // Static IP address is protected against deletion
}
type StaticIpStateType string

const (
	StaticIpStateTypeAssigned  StaticIpStateType = "assigned"
	StaticIpStateTypeAvailable StaticIpStateType = "available"
	StaticIpStateTypeCreated   StaticIpStateType = "created"
	StaticIpStateTypeCreating  StaticIpStateType = "creating"
	StaticIpStateTypeDeleted   StaticIpStateType = "deleted"
	StaticIpStateTypeDeleting  StaticIpStateType = "deleting"
)

func StaticIpStateTypeChoices() []string {
	return []string{"assigned", "available", "created", "creating", "deleted", "deleting"}
}

// projectStaticIpAvailabilityListOut ProjectStaticIPAvailabilityListResponse
type projectStaticIpAvailabilityListOut struct {
	StaticIpAddressAvailability []StaticIpAddressAvailabilityOut `json:"static_ip_address_availability"` // Paginated array
}

// publicStaticIpAvailabilityListOut PublicStaticIPAvailabilityListResponse
type publicStaticIpAvailabilityListOut struct {
	StaticIpAddressAvailability []StaticIpAddressAvailabilityOut `json:"static_ip_address_availability"` // Paginated array
}

// staticIpListOut StaticIPListResponse
type staticIpListOut struct {
	StaticIps []StaticIpOut `json:"static_ips"` // Paginated array
}
